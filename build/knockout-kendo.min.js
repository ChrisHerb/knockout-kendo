/*
 * knockout-kendo 0.9.0
 * Copyright Â© 2013 Ryan Niemeyer & Telerik
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); 
 * you may not use this file except in compliance with the License. 
 * You may obtain a copy of the License at

 * http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software 
 * distributed under the License is distributed on an "AS IS" BASIS, 
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
 * See the License for the specific language governing permissions and 
 * limitations under the License.
 */
!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),require("jquery"),require("kendo")):"function"==typeof define&&define.amd?define(["knockout","jquery","kendo"],a):a(window.ko,window.jQuery,window.kendo)}(function(a,b,c,d){c=c||window.kendo,a.kendo=a.kendo||{},a.kendo.BindingFactory=function(){var e=this;this.createBinding=function(c){if(b()[c.parent||c.name]){var d={};d.init=function(a,b,f,g,h){var i=e.buildOptions(c,b);return i.async===!0||c.async===!0&&i.async!==!1?(setTimeout(function(){d.setup(a,i,h)},0),void 0):(d.setup(a,i,h),i&&i.useKOTemplates?{controlsDescendantBindings:!0}:void 0)},d.setup=function(d,f,g){var h,i=b(d);e.setupTemplates(c.templates,f,d,g),h=e.getWidget(c,f,i),e.handleEvents(f,c,d,h,g),e.watchValues(h,f,c,d),h.destroy&&a.utils.domNodeDisposal.addDisposeCallback(d,function(){h.destroy()})},d.options={},d.widgetConfig=c,a.bindingHandlers[c.bindingName||c.name]=d}},this.buildOptions=function(b,d){var e=b.defaultOption,f=a.utils.extend({},a.bindingHandlers[b.name].options),g=a.utils.unwrapObservable(d());return g instanceof c.data.DataSource||"object"!=typeof g||null===g||e&&!(e in g)?f[e]=d():a.utils.extend(f,g),f};var f=function(b,c){return function(d){return a.renderTemplate(b,c.createChildContext(d._raw&&d._raw()||d))}};this.setupTemplates=function(b,c,d,e){var g,h,i,j;if(b&&c&&c.useKOTemplates){for(g=0,h=b.length;h>g;g++)i=b[g],c[i]&&(c[i]=f(c[i],e));j=c.dataBound,c.dataBound=function(){a.memoization.unmemoizeDomNodeAndDescendants(d),j&&j.apply(this,arguments)}}},this.unwrapOneLevel=function(b){var d,e={};if(b)if(b instanceof c.data.DataSource)e=b;else if("object"==typeof b)for(d in b)e[d]=a.utils.unwrapObservable(b[d]);return e},this.getWidget=function(b,c,d){var e;if(b.parent){var f=d.closest("[data-bind*='"+b.parent+":']");e=f.length?f.data(b.parent):null}else e=d[b.name](this.unwrapOneLevel(c)).data(b.name);return a.isObservable(c.widget)&&c.widget(e),e},this.watchValues=function(a,b,c,d){var f,g=c.watch;if(g)for(f in g)g.hasOwnProperty(f)&&e.watchOneValue(f,a,b,c,d)},this.watchOneValue=function(c,e,f,g,h){var i=a.computed({read:function(){var i,j,k=g.watch[c],l=a.utils.unwrapObservable(f[c]),m=g.parent?[h]:[];b.isArray(k)?k=e[l?k[0]:k[1]]:"string"==typeof k?k=e[k]:j=!0,k&&f[c]!==d&&(j?m.push(l,f):(i=k.apply(e,m),m.push(l)),(j||i!==l)&&k.apply(e,m))},disposeWhenNodeIsRemoved:h}).extend({throttle:f.throttle||0===f.throttle?f.throttle:1});a.isObservable(f[c])||i.dispose()},this.handleEvents=function(a,b,c,d,f){var g,h,i=b.events;if(i)for(g in i)i.hasOwnProperty(g)&&(h=i[g],"string"==typeof h&&(h={value:h,writeTo:h}),e.handleOneEvent(g,h,a,c,d,b.childProp,f))},this.handleOneEvent=function(b,c,d,e,f,g,h){var i="function"==typeof c?c:d[c.call];"function"==typeof c?i=i.bind(h.$data,d):c.call&&"function"==typeof d[c.call]?i=d[c.call].bind(h.$data,h.$data):c.writeTo&&a.isWriteableObservable(d[c.writeTo])&&(i=function(a){var b,f;g&&a[g]&&a[g]!==e||(b=c.value,f="string"==typeof b&&this[b]?this[b](g&&e):b,d[c.writeTo](f))}),i&&f.bind(b,i)}},a.kendo.bindingFactory=new a.kendo.BindingFactory,a.kendo.setDataSource=function(b,d,e){var f,g;return d instanceof c.data.DataSource?(b.setDataSource(d),void 0):(e&&e.useKOTemplates||(f=a.mapping&&d&&d.__ko_mapping__,g=d&&f?a.mapping.toJS(d):a.toJS(d)),b.dataSource.data(g||d),void 0)},function(){var a=c.data.ObservableArray.fn.wrap;c.data.ObservableArray.fn.wrap=function(b){var c=a.apply(this,arguments);return c._raw=function(){return b},c}}();var e=function(b){return function(c){c&&(a.utils.extend(this.options[b],c),this.redraw(),this.value(.001+this.value()))}},f=a.kendo.bindingFactory.createBinding.bind(a.kendo.bindingFactory),g="center",h="clicked",i="close",j="collapse",k="content",l="data",m="enable",n="expand",o="expanded",p="error",q="filter",r="info",s="isOpen",t="max",u="min",v="open",w="palette",x="readonly",y="search",z="select",A="selected",B="size",C="success",D="title",E="value",F="values",G="warning",H="zoom";f({name:"kendoAutoComplete",events:{change:E,open:{writeTo:s,value:!0},close:{writeTo:s,value:!1}},watch:{enabled:m,search:[y,i],data:function(b){a.kendo.setDataSource(this,b)},value:E}}),f({name:"kendoButton",defaultOption:h,events:{click:{call:h}},watch:{enabled:m}}),f({name:"kendoCalendar",defaultOption:E,events:{change:E},watch:{max:t,min:u,value:E}}),f({name:"kendoColorPicker",events:{change:E,open:{writeTo:s,value:!0},close:{writeTo:s,value:!1}},watch:{enabled:m,value:E,color:E,palette:w}}),f({name:"kendoComboBox",events:{change:E,open:{writeTo:s,value:!0},close:{writeTo:s,value:!1}},watch:{enabled:m,isOpen:[v,i],data:function(b){a.kendo.setDataSource(this,b)},value:E}}),f({name:"kendoDatePicker",defaultOption:E,events:{change:E,open:{writeTo:s,value:!0},close:{writeTo:s,value:!1}},watch:{enabled:m,max:t,min:u,value:E,isOpen:[v,i]}}),f({name:"kendoDateTimePicker",defaultOption:E,events:{change:E,open:{writeTo:s,value:!0},close:{writeTo:s,value:!1}},watch:{enabled:m,max:t,min:u,value:E,isOpen:[v,i]}}),f({name:"kendoDropDownList",events:{change:E,open:{writeTo:s,value:!0},close:{writeTo:s,value:!1}},watch:{enabled:m,isOpen:[v,i],data:function(b){a.kendo.setDataSource(this,b),b.length&&this.options.optionLabel&&this.select()<0&&this.select(0)},value:E}}),f({name:"kendoEditor",defaultOption:E,events:{change:E},watch:{enabled:m,value:E}}),f({name:"kendoGantt",defaultOption:l,watch:{data:function(b){a.kendo.setDataSource(this,b)}}}),f({name:"kendoGrid",defaultOption:l,watch:{data:function(b,c){a.kendo.setDataSource(this,b,c)}},templates:["rowTemplate","altRowTemplate"]}),f({name:"kendoListView",defaultOption:l,watch:{data:function(b,c){a.kendo.setDataSource(this,b,c)}},templates:["template"]}),f({name:"kendoMaskedTextBox",defaultOption:E,events:{change:E},watch:{enabled:m,isReadOnly:x,value:E}}),f({name:"kendoMap",events:{zoomEnd:function(b,c){a.isWriteableObservable(b.zoom)&&b.zoom(c.sender.zoom())},panEnd:function(b,c){var d;a.isWriteableObservable(b.center)&&(d=c.sender.center(),b.center([d.lat,d.lng]))}},watch:{center:g,zoom:H}}),f({name:"kendoMenu",async:!0}),f({name:"kendoMenuItem",parent:"kendoMenu",watch:{enabled:m,isOpen:[v,i]},async:!0}),f({name:"kendoMobileButtonGroup",events:{select:function(b,c){a.isWriteableObservable(b.selectedIndex)&&b.selectedIndex(c.sender.current().index())}},watch:{enabled:m,selectedIndex:z}}),f({name:"kendoMobileNavBar",watch:{title:D}}),f({name:"kendoMobilePopOver",events:{open:{writeTo:s,value:!0},close:{writeTo:s,value:!1}},watch:{isOpen:function(a,c){a?this.open(b(c.target)):this.element.parent().is(":visible")&&this.close()}},async:!0}),f({name:"kendoMobileTabStrip",events:{select:function(b,c){a.isWriteableObservable(b.selectedIndex)&&b.selectedIndex(c.item.index())}},watch:{selectedIndex:function(a){(a||0===a)&&this.switchTo(a)}}}),f({name:"kendoMultiSelect",events:{change:E,open:{writeTo:s,value:!0},close:{writeTo:s,value:!1}},watch:{enabled:m,search:[y,i],data:function(b){a.kendo.setDataSource(this,b)},value:E}});var I=function(a,b){b||0===b?this.show(b,a):this.hide()};f({name:"kendoNotification",watch:{error:function(a){I.call(this,p,a)},info:function(a){I.call(this,r,a)},success:function(a){I.call(this,C,a)},warning:function(a){I.call(this,G,a)}}}),f({name:"kendoNumericTextBox",defaultOption:E,events:{change:E},watch:{enabled:m,value:E,max:function(a){this.options.max=a;var b=this.value();(b||0===b)&&b>a&&this.value(a)},min:function(a){this.options.min=a;var b=this.value();(b||0===b)&&a>b&&this.value(a)}}}),f({name:"kendoPanelBar",async:!0}),f({name:"kendoPanelItem",parent:"kendoPanelBar",watch:{enabled:m,expanded:[n,j],selected:[z]},childProp:"item",events:{expand:{writeTo:o,value:!0},collapse:{writeTo:o,value:!1},select:{writeTo:A,value:E}},async:!0}),f({name:"kendoProgressBar",defaultOption:E,events:{change:E},watch:{enabled:m,value:E}}),f({name:"kendoRangeSlider",defaultOption:F,events:{change:F},watch:{values:F,enabled:m}}),f({name:"kendoScheduler",watch:{data:function(b,c){a.kendo.setDataSource(this,b,c)}},async:!0}),f({name:"kendoSlider",defaultOption:E,events:{change:E},watch:{value:E,enabled:m}}),f({name:"kendoSortable",defaultOption:l,events:{end:function(c,d){var e="__ko_kendo_sortable_data__",f="receive"!==d.action?a.dataFor(d.item[0]):d.draggableEvent[e],g=c.data,h=c.data;("sort"===d.action||"remove"===d.action)&&(h.splice(d.oldIndex,1),"remove"===d.action&&(d.draggableEvent[e]=f)),("sort"===d.action||"receive"===d.action)&&(h.splice(d.newIndex,0,f),delete d.draggableEvent[e],b(d.draggableEvent.target).hide(),d.preventDefault()),g.valueHasMutated()}}}),f({name:"kendoSplitter",async:!0}),f({name:"kendoSplitterPane",parent:"kendoSplitter",watch:{max:t,min:u,size:B,expanded:[n,j]},childProp:"pane",events:{collapse:{writeTo:o,value:!1},expand:{writeTo:o,value:!0},resize:B},async:!0}),f({name:"kendoTabStrip",async:!0}),f({name:"kendoTab",parent:"kendoTabStrip",watch:{enabled:m},childProp:"item",async:!0}),f({name:"kendoTooltip",events:{},watch:{content:k,filter:q}}),f({name:"kendoTimePicker",defaultOption:E,events:{change:E},watch:{max:t,min:u,value:E,enabled:m,isOpen:[v,i]}}),f({name:"kendoTreeView",async:!0}),f({name:"kendoTreeItem",parent:"kendoTreeView",watch:{enabled:m,expanded:[n,j],selected:function(a,b){b?this.select(a):this.select()[0]==a&&this.select(null)}},childProp:"node",events:{collapse:{writeTo:o,value:!1},expand:{writeTo:o,value:!0},select:{writeTo:A,value:!0}},async:!0}),f({name:"kendoUpload",watch:{enabled:m}}),f({name:"kendoWindow",events:{open:{writeTo:s,value:!0},close:{writeTo:s,value:!1}},watch:{content:k,title:D,isOpen:[v,i]},async:!0}),f({name:"kendoBarcode",watch:{value:E}}),f({name:"kendoChart",watch:{data:function(b){a.kendo.setDataSource(this,b)}}}),f({name:"kendoLinearGauge",defaultOption:E,watch:{value:E,gaugeArea:e("gaugeArea"),pointer:e("pointer"),scale:e("scale")}}),f({name:"kendoQRCode",watch:{value:E}}),f({name:"kendoRadialGauge",defaultOption:E,watch:{value:E,gaugeArea:e("gaugeArea"),pointer:e("pointer"),scale:e("scale")}}),f({name:"kendoSparkline",watch:{data:function(b){a.kendo.setDataSource(this,b)}}})});