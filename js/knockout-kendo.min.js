//knockout-kendo v0.2.0 | (c) 2012 Ryan Niemeyer | http://www.opensource.org/licenses/mit-license
(function(a,b,c){a.kendo=a.kendo||{},a.kendo.BindingFactory=function(){var c=this;this.createBinding=function(d){if(!b()[d.parent||d.name])return;var e={};e.init=function(a,b){var f=c.buildOptions(d,b);if(f.async===!0||d.async===!0&&f.async!==!1){setTimeout(function(){e.setup(a,f)},0);return}e.setup(a,f)},e.setup=function(e,f){var g,h=b(e);g=c.getWidget(d,f,h),c.handleEvents(f,d,e,g),c.watchValues(g,f,d,e),g.destroy&&a.utils.domNodeDisposal.addDisposeCallback(e,function(){g.destroy()})},e.options={},e.widgetConfig=d,a.bindingHandlers[d.bindingName||d.name]=e},this.buildOptions=function(b,c){var d=b.defaultOption,e=a.utils.extend({},a.bindingHandlers[b.name].options),f=a.utils.unwrapObservable(c());return typeof f!="object"||d&&!(d in f)?e[d]=c():a.utils.extend(e,f),e},this.getWidget=function(b,c,d){var e;if(b.parent){var f=d.closest("[data-bind*='"+b.parent+":']");e=f.length?f.data(b.parent):null}else e=d[b.name](a.toJS(c)).data(b.name);return a.isObservable(c.widget)&&c.widget(e),e},this.watchValues=function(b,d,e,f){var g,h=e.watch;if(h)for(g in h)h.hasOwnProperty(g)&&a.isObservable(d[g])&&c.watchOneValue(g,b,d,e,f)},this.watchOneValue=function(c,d,e,f,g){a.computed({read:function(){var h=f.watch[c],i=a.utils.unwrapObservable(e[c]),j=f.parent?[g,i]:[i];b.isArray(h)?h=d[i?h[0]:h[1]]:typeof h=="string"&&(h=d[h]),h&&h.apply(d,j)},disposeWhenNodeIsRemoved:g})},this.handleEvents=function(b,d,e,f){var g,h,i=d.events;if(i)for(g in i)i.hasOwnProperty(g)&&(h=i[g],typeof h=="string"&&(h={value:h,writeTo:h}),a.isObservable(b[h.writeTo])&&c.handleOneEvent(g,h,b,e,f,d.childProp))},this.handleOneEvent=function(a,b,c,d,e,f){e.bind(a,function(a){var e,g;if(!f||!a[f]||a[f]===d)e=b.value,g=typeof e=="string"&&this[e]?this[e](f&&d):e,c[b.writeTo](g)})}},a.kendo.bindingFactory=new a.kendo.BindingFactory,a.kendo.setDataSource=function(b,c){b.dataSource.data(a.mapping?a.mapping.toJS(c):a.toJS(c))};var d=a.kendo.bindingFactory.createBinding.bind(a.kendo.bindingFactory),e="close",f="collapse",g="content",h="data",i="disable",j="enable",k="expand",l="enabled",m="expanded",n="isOpen",o="max",p="min",q="open",r="resize",s="search",t="select",u="selected",v="size",w="title",x="value",y="values";d({name:"kendoAutoComplete",events:{change:x,open:{writeTo:n,value:!0},close:{writeTo:n,value:!1}},watch:{enabled:j,search:[s,e],data:function(b){a.kendo.setDataSource(this,b)},value:x}}),d({name:"kendoCalendar",defaultOption:x,events:{change:x},watch:{max:o,min:p,value:x}}),d({name:"kendoComboBox",events:{change:x,open:{writeTo:n,value:!0},close:{writeTo:n,value:!1}},watch:{enabled:j,isOpen:[q,e],data:function(b){a.kendo.setDataSource(this,b)},value:x}}),d({name:"kendoDatePicker",defaultOption:x,events:{change:x,open:{writeTo:n,value:!0},close:{writeTo:n,value:!1}},watch:{enabled:j,max:o,min:p,value:x,isOpen:[q,x]}}),d({name:"kendoDropDownList",events:{change:x,open:{writeTo:n,value:!0},close:{writeTo:n,value:!1}},watch:{enabled:j,isOpen:[q,e],data:function(b){a.kendo.setDataSource(this,b)},value:x}}),d({name:"kendoEditor",defaultOption:x,events:{change:x},watch:{enabled:j,value:x}}),d({name:"kendoGrid",defaultOption:h,watch:{data:function(b){a.kendo.setDataSource(this,b)}}}),d({name:"kendoListView",defaultOption:h,watch:{data:function(b){a.kendo.setDataSource(this,b)}}}),d({name:"kendoMenu",async:!0}),d({name:"kendoMenuItem",parent:"kendoMenu",watch:{enabled:j,isOpen:[q,e]},async:!0}),d({name:"kendoNumericTextBox",defaultOption:x,events:{change:x},watch:{enabled:j,value:x,max:function(a){this.options.max=a,this.value()>a&&this.value(a)},min:function(a){this.options.min=a,this.value()<a&&this.value(a)}}}),d({name:"kendoPanelBar",async:!0}),d({name:"kendoPanelItem",parent:"kendoPanelBar",watch:{enabled:j,expanded:[k,f]},childProp:"item",events:{expand:{writeTo:m,value:!0},collapse:{writeTo:m,value:!1}},async:!0}),d({name:"kendoRangeSlider",defaultOption:y,events:{change:y},watch:{values:y,enabled:[j,i]}}),d({name:"kendoSlider",defaultOption:x,events:{change:x},watch:{value:x,enabled:[j,i]}}),d({name:"kendoSplitter",async:!0}),d({name:"kendoSplitterPane",parent:"kendoSplitter",watch:{max:o,min:p,size:v,expanded:[k,f]},childProp:"pane",events:{collapse:{writeTo:m,value:!1},expand:{writeTo:m,value:!0},resize:v},async:!0}),d({name:"kendoTabStrip",async:!0}),d({name:"kendoTab",parent:"kendoTabStrip",watch:{selected:function(a,b){this.select(b?a:null)},enabled:j},childProp:"item",events:{selected:{writeTo:u,value:!0}},async:!0}),d({name:"kendoTimePicker",defaultOption:x,events:{change:x},watch:{max:o,min:p,value:x,enabled:j,isOpen:[q,e]}}),d({name:"kendoTreeView",async:!0}),d({name:"kendoTreeItem",parent:"kendoTreeView",watch:{enabled:j,expanded:[k,f],selected:function(a,b){this.select(b?a:null)}},childProp:"node",events:{collapse:{writeTo:m,value:!1},expand:{writeTo:m,value:!0},select:{writeTo:u,value:!0}},async:!0}),d({name:"kendoUpload",watch:{enabled:[j,i]}}),d({name:"kendoWindow",events:{open:{writeTo:n,value:!0},close:{writeTo:n,value:!1}},watch:{content:g,title:w,isOpen:[q,e]}})})(ko,jQuery)